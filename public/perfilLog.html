<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter CJR - Perfil Logado</title>
    <link rel="stylesheet" href="./css/perfilLog.css">
    <link rel="stylesheet" href="./css/cssModalProfile.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
</head>

<body>
    <nav class="header-container">
        <img class="logo_cjr" src=".\images\Logo_CJR_Estilizado.png" alt="Logo estilizado CJR">

        <div style="flex-grow: 1;"></div>

        <div class="nome-user-logado-header">
            <a href="#">
                <button class="nome-user-logado-button">Joazin Gamer</button>
            </a>
        </div>

        <div class="foto-user-logado-header">
            <a href="#">
                <img class="foto-user-logado" src=".\images\FotoPerfil1.png" alt="Foto de perfil">
            </a>
        </div>

        <div class="logout-user-header">
            <a href="#" class="logout-user-header-button">
                <img src="./images/log-out.png" alt="Botão de Logout" style="cursor: pointer;">
            </a>
        </div>


    </nav>

    <main class="coluna">
        <section class="info-perfil">
            <div class="section-info-perfil">
                <div class="info-perfil-user">
                    <div class="inline-inicio">
                        <img class="perfil-pic" src="./images/perfil-pic.svg" alt="Imagem de perfil">
                        <div class="info-perfil-texto">

                            <!-- Parte esquerda da box de info-perfil -->
                            <p class="nome-user-info-perfil" style="color: #23424A;">{{username}}</p>
                            <p class="cargo-user-logado">
                                <span class="icon-cargo">
                                    <img src="./images/icon-office.png" alt="Ícone Cargo">
                                </span> Assessora
                            </p>
                            <p class="email-user">
                                <span class="icon-email">
                                    <img src="./images/icon-email.png" alt="Ícone Email">
                                </span> Joazin.gamer.23@cjr.org.br
                            </p>
                        </div>

                    </div>
                    <!-- Parte direita da box de info perfil botões de editar e criar post-->
                    <div class="info-perfil-botoes">
                        <p class="botao-editar-perfil">
                            <a href="editarPerfil">
                                <button
                                    style="background: #ffff;border-radius: 16px; padding: 12px; cursor: pointer; color: #000;; border: none; font-size: 16px;"
                                    class="botao-editar-perfil-button">Editar Perfil</button>
                            </a>
                        <p class="btn-criarpost">
                            <button
                                style="background: #ffff;border-radius: 16px; padding: 12px; padding-right: 18px; cursor: pointer; color: #000;; border: none; font-size: 16px;"
                                class="botao-criar-post-button btn-criarpost">Criar Post</button>
                    </div>
                    
                </div>
                <div id="fade" class="hide"></div>
                <div id="modal" class="hide">
                    <div class="modal-header-2">
                        <h2>Escreva seu post:</h2>
                        <button class="btn-fechar btn-profile">Fechar</button>
                    </div>
                    <div class="modal-content-2">
                        <textarea id="markdownEditor" class="create-post" cols="30" rows="10"></textarea>
                        <div class="botao-postar">
                    <button id="savePost" style="width: 100px; height: 40px; border: 0; margin-bottom: 5px; border-radius: 7px; transition: 0.4s;">Publicar</button>
                </div>
            </div>
        </div>

                <div class="espaco"> </div>

                <section class="Publicacoes">
                    <div class="section">
                        <p class="divpublicacao" style="color: #FFFFFF;"><strong>Publicações</strong></p>
                        <hr size="3" width="100%" color="#FFFFFF">

                        <div class="twittes">
                            <div class="inline">
                                <img class="perfilpost" src="./images/FotoPerfil1.png" alt="Imagem de perfil">
                                <div class="nome_data">
                                    <a href="perfil"><button
                                            style="background:#6ADAFF; border-radius: 16px; padding: 12px; cursor: pointer; color:#FFFF; border: none; font-size: 16px;">Joazin
                                            Gamer</button> </a>
                                    <p class="data">22/10/2023</p>
                                </div>
                            </div>
                            <div class="escrito">
                                <p class="escrito_" style="color: #FFFFFF;">Contrary to popular belief, Lorem Ipsum is
                                    not simply random text. It has roots in a piece of classical Latin literature from
                                    45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at
                                    Hampden-Sydney College in Virginia, looked up one of the more obscure Latin</p>
                            </div>
                            <div class="icon-comment-first">
                                <img src="./images/comment.png" alt="Ícone Comentário">

                            </div>
                            <div class="espaco"> </div>

                        </div>
                        <div class="espaco"> </div>

                        <div class="twittes">
                            <div class="inline">
                                <img class="perfilpost" src="./images/FotoPerfil1.png" alt="Imagem de perfil">
                                <div class="nome_data">
                                    <a href="perfil"><button
                                            style="background:#6ADAFF; border-radius: 16px; padding: 12px; cursor: pointer; color:#FFFF; border: none; font-size: 16px;">Joazin
                                            Gamer</button> </a>
                                    <p class="data">22/10/2023</p>
                                </div>
                                <div class="escrito">
                                    <p class="escrito_" style="color: #FFFFFF;">Contrary to popular belief, Lorem Ipsum
                                        is not simply random text. It has roots in a piece of classical Latin literature
                                        from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor
                                        at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin
                                    </p>
                                </div>
                                <div class="img_postada">
                                    <img class="imgpostada" src="./images/ImagemPostada.png" alt="Imagem postada">
                                </div>
                                <div class="icon-comment">
                                    <img src="./images/comment.png" alt="Ícone Comentário">
                                    <img src="./images/editar_post.png" alt="Ícone Editar">

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="espaco"> </div>

                </section>
    </main>
    <script src="./js/scripts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            const token = localStorage.getItem('token');

            if (token) {
                try {
                    const response = await axios.get('/users/me', {
                        headers: {
                            Authorization: `Bearer ${token}`
                        }
                    });

                    const userData = response.data;

                    // exibindo informações do usuário no perfil
                    const usernameElement = document.querySelector('.nome-user-info-perfil');
                    const emailElement = document.querySelector('.email-user');
                    const cargoElement = document.querySelector('.cargo-user-logado');
                    const headerButton = document.querySelector('.nome-user-logado-button');

                    usernameElement.textContent = userData.username;
                    emailElement.textContent = `Email: ${userData.email}`;
                    cargoElement.textContent = `Cargo: ${userData.cargo}`;
                    headerButton.textContent = userData.username;

                } catch (error) {
                    console.error('Erro ao buscar informações do usuário:', error);
                }
            }
        });
    </script>
</body>
</body>

</html>
